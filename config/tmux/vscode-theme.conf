# VSCode Dark Theme for tmux
# Colors inspired by Visual Studio Code Dark theme

# Terminal colors - enhanced mosh compatibility
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",xterm-256color*:Tc"
# Ensure colors work over mosh/ssh
set -ga terminal-overrides ",*:RGB"

# Status bar - VSCode sidebar color with 256-color fallbacks
set -g status-style "bg=colour235,fg=colour188"  # Fallback for mosh
if-shell '[[ "$TERM" =~ "256color" ]]' \
  'set -g status-style "bg=#252526,fg=#d4d4d4"'
set -g status-left-length 20
set -g status-right-length 80

# Window status - muted text for inactive, VSCode blue for active
set -g window-status-style "bg=colour235,fg=colour243"  # Fallback
set -g window-status-current-style "bg=colour33,fg=colour255,bold"  # Fallback
set -g window-status-activity-style "bg=colour220,fg=colour232"  # Fallback

if-shell '[[ "$TERM" =~ "256color" ]]' \
  'set -g window-status-style "bg=#252526,fg=#6d6d6d"; \
   set -g window-status-current-style "bg=#007acc,fg=#ffffff,bold"; \
   set -g window-status-activity-style "bg=#ffcc02,fg=#1e1e1e"'

# Window status format
set -g window-status-format " #I:#W "
set -g window-status-current-format " #I:#W "

# Pane borders - muted for inactive, VSCode blue for active
set -g pane-border-style "fg=colour243"  # Fallback
set -g pane-active-border-style "fg=colour33"  # Fallback

if-shell '[[ "$TERM" =~ "256color" ]]' \
  'set -g pane-border-style "fg=#6d6d6d"; \
   set -g pane-active-border-style "fg=#007acc"'

# Message style - VSCode blue background
set -g message-style "bg=colour33,fg=colour255"  # Fallback
set -g message-command-style "bg=colour232,fg=colour188"  # Fallback

if-shell '[[ "$TERM" =~ "256color" ]]' \
  'set -g message-style "bg=#007acc,fg=#ffffff"; \
   set -g message-command-style "bg=#1e1e1e,fg=#d4d4d4"'

# Copy mode - VSCode blue
set -g mode-style "bg=colour33,fg=colour255"  # Fallback

if-shell '[[ "$TERM" =~ "256color" ]]' \
  'set -g mode-style "bg=#007acc,fg=#ffffff"'

# Status left (session info) - VSCode blue accent with icon
set -g status-left "#[bg=colour33,fg=colour255,bold]  #S #[bg=colour235,fg=colour33]"  # Fallback

if-shell '[[ "$TERM" =~ "256color" ]]' \
  'set -g status-left "#[bg=#007acc,fg=#ffffff,bold]  #S #[bg=#252526,fg=#007acc]"'

# Status right (system info and time) - with CPU, RAM, and time  
set -g status-right "#[fg=colour107]CPU: #(top -l 1 | grep 'CPU usage' | awk '{print $3}') #[fg=colour188]│ #[fg=colour173]MEM: #(~/.tmux/memory-usage.sh) #[fg=colour188]│ #[fg=colour33] %H:%M #[fg=colour243] %d-%b"  # Fallback

if-shell '[[ "$TERM" =~ "256color" ]]' \
  'set -g status-right "#[fg=#6a9955]CPU: #(top -l 1 | grep 'CPU usage' | awk '\'''{print $3}'\'') #[fg=#d4d4d4]│ #[fg=#ce9178]MEM: #(~/.tmux/memory-usage.sh) #[fg=#d4d4d4]│ #[fg=#007acc] %H:%M #[fg=#6d6d6d] %d-%b"'

# Clock - VSCode blue
set -g clock-mode-colour "colour33"  # Fallback
set -g clock-mode-style 24

if-shell '[[ "$TERM" =~ "256color" ]]' \
  'set -g clock-mode-colour "#007acc"'